apiVersion: v1 
kind: ConfigMap 
metadata: 
   name: shipping 
   namespace: roboshop 
   labels: 
      component: shipping 
      project: roboshop 
      tier: app 
data: 
   CART_ENDPOINT: "cart_8080" 
   DB_HOST: "mysql" 
--- 
apiVersion: apps/v1 
kind: Deployment 
metadata: 
   name: shipping 
   namespace: roboshop 
   #deployment labels 
   labels: 
      component: shipping 
      project: roboshop
      tier: app
spec: 
  replicas: 1  
  # These are the labels replicas use to create pod replicas, this should match pod labels 
  selector: 
     matchLabels: 
         component: shipping 
         project: roboshop 
         tier: app 
  #This is the pod definition 
  template: 
     metadata: 
        labels: 
           component: shipping 
           project: roboshop 
           tier: app 
     spec: 
       containers: 
       - name: shipping 
         image: subbu2/shipping:v1 
         envFrom: 
         - configMapRef: 
             name: shipping  
--- 
apiVersion: v1
kind: Service 
metadata:  
     name: shipping 
     namespace: roboshop 
     labels: 
        component: shipping 
        project: roboshop 
        tier: app 
spec: 
   selector: 
      component: shipping 
      project: roboshop 
      tier: app 
   ports: 
   - protocol: 
     port: 8080 #service port 
     targetPort: 8080 #target port                                                    